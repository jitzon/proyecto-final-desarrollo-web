<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="plantilla/template :: head">
</head>
<body>
	<header th:replace="plantilla/template :: header"></header>

	<div class="container">		
		<h1 th:text="${titulo}"></h1>		
	</div>
	
<div class="container">
	<div class="row">
		<div class="col">
	
		
		<table class="table" id="datat">
			<thead class="thead-dark">
				<tr>
					<th scope="col">ID</th>
					<th scope="col">Receta</th>
					<th scope="col">Fecha</th>
					<th scope="col">Cantidad</th>
					<th scope="col">Total</th>

				</tr>
			</thead>
			<tbody>
				<tr th:each="vn:${ventas}">
					<th scope="row" th:text="${vn.id}"></th>
					<td th:text="${vn.receta.nombre}"></td>	
					<td th:text="${vn.fecha}"></td>	
					<td th:text="${vn.cantidad}"></td>
					<td th:text="${vn.total}"></td>
						
				
				</tr>
			</tbody>
					
		</table>
		
		    
		</div>	
	</div>
</div>

   <div class="container">
    <div class="row">
        <div class="col">
          <button ; type="button" class="btn btn-primary btn-lg">
            Total Ventas: <span id="val" class="badge badge-light"></span>
            </button>    
        </div>
    </div>
   </div> 

	<footer th:replace="plantilla/template :: footer"></footer>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
<script src="//cdn.datatables.net/plug-ins/1.10.21/api/sum().js"></script>
<script>
var idioma={
    "sProcessing":     "Procesando...",
    "sLengthMenu":     "Mostrar _MENU_ registros",
    "sZeroRecords":    "No se encontraron resultados",
    "sEmptyTable":     "Ningún dato disponible en esta tabla",
    "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
    "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
    "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
    "sInfoPostFix":    "",
    "sSearch":         "Buscar:",
    "sUrl":            "",
    "sInfoThousands":  ",",
    "sLoadingRecords": "Cargando...",
    "oPaginate": {
        "sFirst":    "Primero",
        "sLast":     "Último",
        "sNext":     "Siguiente",
        "sPrevious": "Anterior"
    },
    "oAria": {
        "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
        "sSortDescending": ": Activar para ordenar la columna de manera descendente"
    },
    "buttons": {
        "copy": "Copiar",
        "colvis": "Visibilidad"
    }
}
		$('#datat').DataTable(
			

			{"language":idioma,
            	
            "pageLength": 5}
			);

	
	
	</script>	
	        <script>
            
            var table = document.getElementById("datat"), sumVal = 0;
            
            for(var i = 1; i < table.rows.length; i++)
            {
                sumVal = sumVal + parseInt(table.rows[i].cells[4].innerHTML);
            }
            
            document.getElementById("val").innerHTML =  sumVal;
            
            
        </script>

</html>